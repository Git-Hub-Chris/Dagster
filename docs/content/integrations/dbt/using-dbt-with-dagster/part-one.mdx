---
title: "Using Dagster with dbt, part 1: Set up the dbt project"
description: Dagster can orchestrate dbt alongside other technologies.
---

# Using dbt with Dagster, part one: Set up the dbt project

<Note>
  This is part one of the{" "}
  <a href="/integrations/dbt/using-dbt-with-dagster">
    Using dbt with Dagster software-defined assets
  </a>{" "}
  tutorial.
</Note>

First, you'll download Dagster's `dbt_dagster_tutorial` example and configure the dbt project it contains. The example uses dbt's example [jaffle shop project](https://github.com/dbt-labs/jaffle_shop), but you can follow along with a different project as well.

In this part, you'll:

- [Download the `dbt_dagster_tutorial` example](#step-1-download-the-dbt_dagster_tutorial-example)
- [Create a DuckDB connection profile](#step-2-create-a-duckdb-profile)
- [Configure the project's `dbt_project.yml` file](#step-3-configure-the-dbt_projectyml-file)
- [Configure dbt model data sources](#step-4-configure-dbt-model-data-sources)

---

## Step 1: Download the dbt_dagster_tutorial example

Let's get started by downloading the [`dbt_dagster_tutorial` example](https://github.com/dagster-io/dagster/tree/master/examples/dbt_dagster_tutorial).

1. In the terminal, run the following to download the example:

   ```shell
   dagster project from-example --name dbt_dagster_tutorial --example dbt_dagster_tutorial
   ```

2. Navigate into the `dbt_dagster_tutorial` folder:

   ```shell
   cd dbt_dagster_tutorial
   ```

3. Run the following to install the project's dependencies:

   ```shell
   pip install -e ".[dev]"
   ```

---

## Step 2: Create a DuckDB profile

In this step, you'll add a DuckDB profile to the dbt project. This will allow you to connect dbt to the DuckDB database.

1. Open the `profile.yml` file, located in `/tutorial_template/jaffle_shop/config`.

2. Add the following code to the file:

   ```yaml
   jaffle_shop:
     target: local
     outputs:
       local:
         type: duckdb
         path: tutorial.duckdb
         schema: jaffle_shop
   ```

---

## Step 3: Configure the dbt_project.yml file

In this step, you'll verify that your dbt project's `dbt_project.yml` file is correctly configured.

1. Open the `dbt_project.yml` file, located in `/tutorial_template/jaffle_shop`.

2. Verify the following:

   - That the `profile` is defined as `jaffle_shop` :

     ```yaml
     profile: "jaffle_shop"
     ```

   - That the `jaffle_shop` models are set to materialize into tables:

     ```yaml
     models:
       jaffle_shop:
         +materialized: table
     ```

---

## Step 4: Configure dbt model data sources

Next, you'll tell the models in your dbt project where the source data they depend on will be located. There isn't any data yet - in the next section, we'll create Dagster assets that fetch and provide data to the dbt models.

1. Open the `sources.yml` file, located in `/tutorial_template/jaffle_shop/models`.

2. Add the following code to the file to [declare a source](https://docs.getdbt.com/docs/building-a-dbt-project/using-sources#declaring-a-source), which will define the location of tables containing source data:

   ```yaml
   version: 2

   sources:
     - name: jaffle_shop
       tables:
         - name: orders_raw
         - name: customers_raw
   ```

3. Update the models in `/tutorial_template/jaffle_shop/models/staging` to [select data from the sources you just declared](https://docs.getdbt.com/docs/building-a-dbt-project/using-sources#selecting-from-a-source).

   To do this, update the models' `FROM` statement to use the [`{{ source()}}` function](https://docs.getdbt.com/reference/dbt-jinja-functions/source). When finished, the files should look like the following:

   - For `stg_customers.sql`:

     ```sql
     select
         id as customer_id,
         first_name,
         last_name
     from {{ source('jaffle_shop', 'customers_raw') }}
     ```

   - For `stg_orders.sql`:

     ```sql
     select
         id as order_id,
         user_id as customer_id,
         order_date,
         status
     from {{ source('jaffle_shop', 'orders_raw') }}
     ```

---

## What's next?

At this point, you should have a fully-configured dbt project that's ready to work with Dagster. The next step is to [load the dbt models into Dagster as assets](/integrations/dbt/using-dbt-with-dagster/part-two).
