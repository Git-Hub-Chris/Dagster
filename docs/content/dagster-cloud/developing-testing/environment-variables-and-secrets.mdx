---
title: "Dagster Cloud environment variables and secrets | Dagster Docs"
---

# Dagster Cloud environment variables and secrets

<Note>This guide is applicable to Dagster Cloud.</Note>

Environment variables, which are key-value pairs configured outside your source code, allow you to dynamically modify application behavior depending on the environment.

---

## Understanding environment variables and secrets

- [Overview](#overview)
- [Scope](#scope)
- [Management](#management), including requirements and limitations
- [Storage and encryption](#storage-and-encryption)
- [Reserved variables](#reserved-variables)

### Overview

<TODO></TODO>

### Scope

Environment variables are scoped at the [code location](/dagster-cloud/developing-testing/code-locations) level.

### Management

In the following table, we compare the supported methods for managing and passing environment variables in Dagster Cloud:

- **Setup method** - The method for declaring/managing environment variables
- **How it works** - Summary of how environment variables are configured for the method
- **May be a good fit if...** - A high-level summary of when the method may be a good fit

<table
  className="table"
  style={{
    width: "100%",
  }}
>
  <thead>
    <tr>
      <th
        style={{
          width: "15%",
        }}
      >
        Setup method
      </th>
      <th
        style={{
          width: "40%",
        }}
      >
        How it works
      </th>
      <th>May be a good fit if...</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href="/dagster-cloud/developing-testing/environment-variables/managing-environment-variables-in-dagit">
          Dagster Cloud UI
        </a>
      </td>
      <td>
        Environment variables are managed in the Dagster Cloud UI.{" "}
        <strong>Supported for Serverless and Hybrid deployments.</strong>
        <ul>
          <li>Values are encrypted at rest (TODO)</li>
          <li>Limited to a maximum of TODO environment variables</li>
          <li>
            Setup and management requires{" "}
            <a href="/dagster-cloud/account/managing-users">
              <strong>Organization Admin</strong>, <strong>Admin</strong>, or{" "}
              <strong>Editor</strong> permissions
            </a>{" "}
            in Dagster Cloud
          </li>
        </ul>
      </td>
      <td>
        <ul
          style={{
            marginTop: "0px",
          }}
        >
          <li
            style={{
              marginTop: "0px",
            }}
          >
            You want to manage environment variables in Dagster Cloud
          </li>
          <li>TODO: What else?</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>
        <a href="/dagster-cloud/developing-testing/environment-variables/setup-for-serverless-deployments#configuring-environment-variables-in-github">
          GitHub secrets
        </a>
      </td>
      <td>
        Environment variables are defined in a GitHub repository using Action
        Secrets. <strong>Supported for Serverless deployments only</strong>.
      </td>
      <td>
        <ul
          style={{
            marginTop: "0px",
          }}
        >
          <li
            style={{
              marginTop: "0px",
            }}
          >
            TODO: not sure if we're keeping this method
          </li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>
        <a href="/dagster-cloud/developing-testing/environment-variables/setup-for-serverless-deployments#passing-environment-variables-using-the-dagster-cloud-cli">
          dagster-cloud CLI
        </a>
      </td>
      <td>
        Environment variables are passed in using the <code>--env</code> flag in
        the CLI. <strong>Supported for Serverless deployments only</strong>.
      </td>
      <td>
        <ul
          style={{
            marginTop: "0px",
          }}
        >
          <li
            style={{
              marginTop: "0px",
            }}
          >
            You're using{" "}
            <a href="/dagster-cloud/deployment/serverless">
              Serverless deployment
            </a>
          </li>
          <li>You're not using Dagster's GitHub app</li>
          <li>
            You want to manage environment variables outside of Dagster Cloud
          </li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>
        <a href="/dagster-cloud/developing-testing/environment-variables/setup-for-hybrid-deployments">
          Agent configuration
        </a>
      </td>
      <td>
        Environment variables are defined in the agent's configuration in your
        project's <code>dagster_cloud.yaml</code> file.{" "}
        <strong>Supported for Hybrid deployments only</strong>.
      </td>
      <td>
        <ul
          style={{
            marginTop: "0px",
          }}
        >
          <li
            style={{
              marginTop: "0px",
            }}
          >
            You're using{" "}
            <a href="/dagster-cloud/deployment/hybrid">Hybrid deployment</a>
          </li>
          <li>
            You want to manage environment variables outside of Dagster Cloud
          </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

### Storage and encryption

This may only apply to management using the UI. Will need to confirm once details are finalized.

<TODO></TODO>

### Reserved variables

[Built-in Dagster Cloud environment variables](#built-in-environment-variables) are reserved and are unavailable for use. If used, the following error will be raised: <TODO></TODO>

---

## Managing environment variables

The simplest way to manage environment variables is to use Dagster Cloud's built-in secrets manager, which allows you to create and manage environment variables right in the UI. If you prefer not to use Dagster Cloud's secrets manager, you can use one of [the other methods](#using-alternative-methods) supported for your deployment type.

### Using the Dagster Cloud UI

<Note>
  <a href="/dagster-cloud/account/managing-users">
    <strong>Organization</strong>, <strong>Admin</strong>, or{" "}
    <strong>Editor</strong> permissions
  </a>{" "}
  are required to manage environment variables in Dagster Cloud. This includes
  viewing the value of an existsing environment variable.
</Note>

Declaring environment variables in the Dagster Cloud UI is supported for both Serverless and Hybrid deployments.

1. Sign into your Dagster Cloud account.
2. Click the code location you want to add an environment variable to.
3. Click the **Environment Variables** tab.
4. Click **+ Add** to add a new environment variable.
5. In the window that displays, fill in the following:
   - **Key name** - Enter a name for the environment variable. This is how the variable will be referenced in your code.
   - **Value** - Enter a value for the environment variable.
   - Select the deployment(s) to apply the variable to:
     - **Production**
     - **Branch Deployments**
     - **Local**
6. When finished, click **Save**.

### Using alternative methods

<TabGroup>
  <TabItem name="dagster-cloud CLI (Serverless)">
    <Note>Using the CLI to pass environment variables is only available to Serverless deployments.</Note>
<p>If you're using a git provider like Bitbucket, you can use the <a href="/dagster-cloud/developing-testing/dagster-cloud-cli">dagster-cloud CLI</a> to pass in environment variables with the <code>--env</code> flag.</p>

<p>
  This flag accepts <code>KEY=VALUE</code> pairs. For example:
</p>

```shell
dagster-cloud serverless deploy --env DATABASE_USERNAME=hooli_testing
```

  </TabItem>
  <TabItem name="Agent configuration (Hybrid)">
    <Note>Modifying an agent's configuration to declare environment variables is only supported for Hybrid deployments.</Note>
    <p>
      For Dagster Cloud Hybrid deployments, making environment variables accessible is accomplished by adding them to your agent's configuration in your project's <code>dagster_cloud.yaml</code> file. How the <code>container_context</code> property is configured depends on the agent type.
    </p>
    <p>
      Refer to the configuration reference for your agent type for more info and examples:
    </p>
    <ul>
      <li><a href="/dagster-cloud/deployment/agents/amazon-ecs/configuration-reference#environment-variables-and-secrets">Amazon ECS</a></li>
      <li><a href="/dagster-cloud/deployment/agents/docker/configuration-reference#environment-variables-and-secrets">Docker</a></li>
      <li><a href="/dagster-cloud/deployment/agents/kubernetes/configuration-reference#environment-variables-and-secrets">Kubernetes</a></li>
    </ul>
  </TabItem>
</TabGroup>

---

## Accessing environment variables in Dagster code

Ready to start using environment variables in your Dagster code? Refer to the [Using environment variables and secrets in Dagster code guide](/guides/dagster/using-environment-variables-and-secrets) for more info and examples.

---

## Built-in environment variables

[Dagster Cloud](/dagster-cloud) provides a set of built-in, automatically populated environment variables, such as the name of a deployment or details about a branch deployment commit, that can be used to modify behavior based on environment.

**Want to see an example?** Check out the [Testing against production with Dagster Cloud Branch Deployments guide](/guides/dagster/branch_deployments) for an in-depth look at using environment variables to test Dagster code without impacting production.

### All deployment variables

The following variables are available in every deployment of your Dagster Cloud instance, including full (e.g., `prod`) and branch deployments.

<ReferenceTable>
  <ReferenceTableItem propertyName="DAGSTER_CLOUD_DEPLOYMENT_NAME">
    The name of the Dagster Cloud deployment. For example, <code>prod</code>.
  </ReferenceTableItem>
  <ReferenceTableItem propertyName="DAGSTER_CLOUD_IS_BRANCH_DEPLOYMENT">
    If <code>1</code>, the deployment is a{" "}
    <a href="/dagster-cloud/developing-testing/branch-deployments">
      branch deployment
    </a>
    . Refer to the <a href="#branch-deployment-variables">
      Branch Deployment variables section
    </a> for a list of variables available in branch deployments.
  </ReferenceTableItem>
</ReferenceTable>

### Branch Deployment variables

The following environment variables are currently available only in a [branch deployment](/dagster-cloud/developing-testing/branch-deployments).

For every commit made to a branch, the following metadata is available:

<ReferenceTable>
  <ReferenceTableItem propertyName="DAGSTER_CLOUD_GIT_SHA">
    The SHA of the commit.
  </ReferenceTableItem>
  <ReferenceTableItem propertyName="DAGSTER_CLOUD_GIT_TIMESTAMP">
    The time the commit occurred.
  </ReferenceTableItem>
  <ReferenceTableItem propertyName="DAGSTER_CLOUD_GIT_AUTHOR_EMAIL">
    The email of the git user who authored the commit.
  </ReferenceTableItem>
  <ReferenceTableItem propertyName="DAGSTER_CLOUD_GIT_AUTHOR_NAME">
    The name of the git user who authored the commit.
  </ReferenceTableItem>
  <ReferenceTableItem propertyName="DAGSTER_CLOUD_GIT_MESSAGE">
    The message associated with the commit.
  </ReferenceTableItem>
  <ReferenceTableItem propertyName="DAGSTER_CLOUD_GIT_BRANCH">
    The name of the branch associated with the commit.
  </ReferenceTableItem>
  <ReferenceTableItem propertyName="DAGSTER_CLOUD_GIT_REPO">
    The name of the repository associated with the commit.
  </ReferenceTableItem>
  <ReferenceTableItem propertyName="DAGSTER_CLOUD_PULL_REQUEST_ID">
    The ID of the pull request associated with the commit.
  </ReferenceTableItem>
  <ReferenceTableItem propertyName="DAGSTER_CLOUD_PULL_REQUEST_STATUS">
    The status of the pull request at the time of the commit. Possible values
    are <code>OPEN</code>, <code>CLOSED</code>, and <code>MERGED</code>.
  </ReferenceTableItem>
</ReferenceTable>
