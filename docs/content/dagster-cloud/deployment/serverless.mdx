---
title: "Serverless deployment in Dagster Cloud | Dagster Docs"
---

# Serverless deployment in Dagster Cloud

<Note>This guide is applicable to Dagster Cloud.</Note>

Dagster Cloud Serverless is a fully managed version of Dagster Cloud, and is the easiest way to get started with Dagster. With Serverless, you can run your Dagster jobs without spinning up any infrastructure.

---

## When to choose Serverless

Serverless works best with workloads that primarily orchestrate other services or perform light computation. Most workloads fit into this category, especially those that orchestrate third-party SaaS products like cloud data warehouses and ETL tools.

If any of the following are applicable, you should select [Hybrid deployment](/dagster-cloud/deployment/hybrid):

- You require substantial computational resources. For example, training a large machine learning (ML) model in-process.
- Your dataset is too large to fit in memory. For example, training a large machine learning (ML) model in-process on a terabyte of data.
- You need to distribute computation across many nodes for a single run. Dagster Cloud runs currently execute on a single node with 4 CPUs.
- You don't want to add Elementl as a data processor.

---

## Limitations

Serverless is currently in early access and is subject to the following limitations:

- Maximum of 100 GB of bandwidth per day
- Maximum of 4500 step-minutes per day
- Runs receive 4 vCPU cores, 16 GB of RAM and 128 GB of ephemeral disk
- Sensors receive 0.25 vCPU cores and 512 MB of RAM
- All Serverless jobs run in the United States

Enterprise customers may request a quota increase by [contacting Sales](mailto:sales@elementl.com).

---

## Getting started with Serverless

- [With GitHub](#with-github)
- [Without GitHub (GitLab, BitBucket, or local development)](#without-github-gitlab-bitbucket-or-local-development)
- [Adding secrets](#adding-secrets)

### With GitHub

If you are a GitHub user, our GitHub integration is the fastest way to get started. It uses a GitHub app and GitHub Actions to set up a repo containing skeleton code and configuration consistent with Dagster Cloud's best practices with a single click.

When you create a new Dagster Cloud organization, you'll be prompted to choose Serverless or Hybrid deployment. Once activated, our GitHub integration will scaffold a new git repo for you with Serverless and Branch Deployments already configured. Pushing to the `main` branch will deploy to your `prod` Serverless deployment. Pull requests will spin up ephemeral [branch deployments](/dagster-cloud/developing-testing/branch-deployments) using the Serverless agent.

### Without GitHub (GitLab, BitBucket, or local development)

If you don't want to use our GitHub integration, we offer a powerful CLI that you can use in another CI environment or on your local laptop.

First, [create a new project](https://docs.dagster.io/getting-started/create-new-project#create-a-new-project) with the Dagster open-source CLI.

```shell
pip install dagster
dagster project from-example \
  --name my-dagster-project \
  --example assets_modern_data_stack
```

<Note>
  Once scaffolded, add <code>dagster-cloud</code> as a dependency in your{" "}
  <code>setup.py</code> file.
</Note>

Next, install the [dagster-cloud CLI](/dagster-cloud/developing-testing/dagster-cloud-cli) and log in to your org. **Note**: The CLI requires a recent version of Python 3 and Docker.

```shell
pip install dagster-cloud
dagster-cloud configure
```

You can also configure the `dagster-cloud` tool noninteractively; see [the CLI docs](/dagster-cloud/developing-testing/dagster-cloud-cli#environment-variables-and-cli-options) for more information.

Finally, deploy your project with Dagster Cloud Serverless:

```shell
dagster-cloud serverless deploy-python-executable \
  --location-name example \
  --package-name assets_modern_data_stack
```

### Adding secrets

Often you'll need to securely access secrets from your jobs. Dagster Cloud supports several methods for adding secrets - refer to the [Dagster Cloud environment variables and secrets documentation](/dagster-cloud/developing-testing/environment-variables-and-secrets) for more info.

### Adding dependencies

Any dependencies specified in either `requirements.txt` or `setup.py` will be installed for you automatically by the Dagster Cloud Serverless infrastructure.

---

## Customizing the runtime environment

Dagster Cloud Serverless packages your code as [PEX](https://pex.readthedocs.io) files and deploys them on Docker images. Many apps will work fine with the default Dagster Cloud Serverless setup. However, some apps may need to make changes to the runtime environment, either to include data files, use a different OS, different Python version, or install some native dependencies. You can customize the runtime environment using various methods described below.

### Including data files

To add data files to your deployment, use the [Data Files Support](https://setuptools.pypa.io/en/latest/userguide/datafiles.html) built into Python's setup.py. This requires adding a `package_data` or `include_package_data` keyword in the call to `setup()` in `setup.py`.

### Using a different Python version

The default version of Python for Serverless deployments is Python 3.8. Versions 3.7, 3.9 and 3.10 are also supported. You can specify the version you want by updating your GitHub workflow or using the `--python-version` command line argument:

- **With GitHub**: Change the `python_version` specified in your `.github/workflows` files. For example, change [this line](https://github.com/dagster-io/quickstart-etl/blob/e07e944c7504a52b3d252553d51ad2085b4d5914/.github/workflows/deploy.yml#L44) in your `deploy.yml` to the version you want.

- **With the CLI**: Add the `--python-version` CLI argument to the deploy command to specify the registry path to the desired base image:

  ```shell
  dagster-cloud serverless deploy --location-name=my_location --python-version=3.9
  ```

### Using a different OS or using native dependencies

Your code is run on a Docker image built using:
1. The standard Python "slim" [Docker image](https://hub.docker.com/_/python), such as `python:3.8-slim`.
2. The `dagster-cloud[serverless]` module installed in the image.

As far as possible, add all dependencies by including the corresponding native Python bindings in your `setup.py`.   When that is not possible, you can build and upload a custom base image that will be used to run your Python code. 

To build and upload the image, use the command line:

1. Build your docker image. Ensure you have included the `dagster-cloud[serverless]` dependency. You can do this by adding the following to your `Dockerfile`: `RUN pip install "dagster-cloud[serverless]"`.

2. Get the credentials to access the Dagster cloud image registry. The following should print out the registry URL:

```shell
$ set -a
$ eval "$(dagster-cloud serverless registry-info)"
$ set +a
$ echo $REGISTRY_URL
657821118200.dkr.ecr.us-west-2.amazonaws.com/serverless-agent-UUID
```

3. Login to docker using the retrieved credentials:

```shell
$ echo $AWS_ECR_PASSWORD | docker login --username AWS --password-stdin $REGISTRY_URL
Login Succeeded
```

3. Tag your built docker image using the `$REGISTRY_URL`:

```shell
$ docker tag build-image:current-tag $REGISTRY_URL:published-tag
```

4. Publish your image:

```shell
$ docker push $REGISTRY_URL:published-tag
```

To use a docker image you have published to Dagster cloud:

- **With GitHub**: Set the `SERVERLESS_BASE_IMAGE` environment variable your GitHub Actions configuration (usually at `.github/workflows/deploy.yml`):

  ```yaml

  env:
    DAGSTER_CLOUD_URL: ...
    DAGSTER_CLOUD_API_TOKEN: ...
    SERVERLESS_BASE_IMAGE: "657821118200.dkr.ecr.us-west-2.amazonaws.com/serverless-agent-UUID:published-tag"
  ```

- **With the CLI**: Add the `--image` CLI argument to the deploy command to specify the registry path to the desired base image:

  ```shell
  dagster-cloud serverless deploy-python-executable \
    --location-name example \
    --package-name assets_modern_data_stack \
    --image $REGISTRY_URL:published-tag
  ```

---

## Transitioning to Hybrid

If your organization begins to hit the limitations of Serverless, you should transition to a Hybrid deployment. Hybrid deployments allow you to run an [agent in your own infrastructure](/dagster-cloud/deployment/agents) and give you substantially more flexibility and control over the Dagster environment.

To switch to Hybrid, navigate to **Status > Agents** in your Dagster Cloud account. On this page, you can disable the Serverless agent on and view instructions for enabling Hybrid.

---

## Security and data protection

Unlike Hybrid, Serverless Deployments on Dagster Cloud require direct access to your data, secrets and source code.

- Dagster Cloud Serverless does not provide persistent storage. Ephemeral storage is deleted when a run concludes.
- Secrets and source code are built into the image directly. Images are stored in a per-customer container registry with restricted access.
- User code is securely sandboxed using modern container sandboxing techniques.
- All production access is governed by industry-standard best practices which are regularly audited.
